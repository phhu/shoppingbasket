require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],2:[function(require,module,exports){!function(window){function sprintf(){var key=arguments[0],cache=sprintf.cache;return cache[key]&&cache.hasOwnProperty(key)||(cache[key]=sprintf.parse(key)),sprintf.format.call(null,cache[key],arguments)}function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}function str_repeat(input,multiplier){return Array(multiplier+1).join(input)}var re={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};sprintf.format=function(parse_tree,argv){var arg,i,k,match,pad,pad_character,pad_length,cursor=1,tree_length=parse_tree.length,node_type="",output=[],is_positive=!0,sign="";for(i=0;i<tree_length;i++)if(node_type=get_type(parse_tree[i]),"string"===node_type)output[output.length]=parse_tree[i];else if("array"===node_type){if(match=parse_tree[i],match[2])for(arg=argv[cursor],k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k]))throw new Error(sprintf("[sprintf] property '%s' does not exist",match[2][k]));arg=arg[match[2][k]]}else arg=match[1]?argv[match[1]]:argv[cursor++];if("function"==get_type(arg)&&(arg=arg()),re.not_string.test(match[8])&&re.not_json.test(match[8])&&"number"!=get_type(arg)&&isNaN(arg))throw new TypeError(sprintf("[sprintf] expecting number but found %s",get_type(arg)));switch(re.number.test(match[8])&&(is_positive=arg>=0),match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":case"i":arg=parseInt(arg,10);break;case"j":arg=JSON.stringify(arg,null,match[6]?parseInt(match[6]):0);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"g":arg=match[7]?parseFloat(arg).toPrecision(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg>>>=0;break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase()}re.json.test(match[8])?output[output.length]=arg:(!re.number.test(match[8])||is_positive&&!match[3]?sign="":(sign=is_positive?"+":"-",arg=arg.toString().replace(re.sign,"")),pad_character=match[4]?"0"===match[4]?"0":match[4].charAt(1):" ",pad_length=match[6]-(sign+arg).length,pad=match[6]&&pad_length>0?str_repeat(pad_character,pad_length):"",output[output.length]=match[5]?sign+arg+pad:"0"===pad_character?sign+pad+arg:pad+sign+arg)}return output.join("")},sprintf.cache={},sprintf.parse=function(fmt){for(var _fmt=fmt,match=[],parse_tree=[],arg_names=0;_fmt;){if(null!==(match=re.text.exec(_fmt)))parse_tree[parse_tree.length]=match[0];else if(null!==(match=re.modulo.exec(_fmt)))parse_tree[parse_tree.length]="%";else{if(null===(match=re.placeholder.exec(_fmt)))throw new SyntaxError("[sprintf] unexpected placeholder");if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=re.key.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(field_list[field_list.length]=field_match[1];""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=re.key_access.exec(replacement_field)))field_list[field_list.length]=field_match[1];else{if(null===(field_match=re.index_access.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");field_list[field_list.length]=field_match[1]}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");parse_tree[parse_tree.length]=match}_fmt=_fmt.substring(match[0].length)}return parse_tree};var vsprintf=function(fmt,argv,_argv){return _argv=(argv||[]).slice(0),_argv.splice(0,0,fmt),sprintf.apply(null,_argv)};"undefined"!=typeof exports?(exports.sprintf=sprintf,exports.vsprintf=vsprintf):(window.sprintf=sprintf,window.vsprintf=vsprintf,"function"==typeof define&&define.amd&&define(function(){return{sprintf:sprintf,vsprintf:vsprintf}}))}("undefined"==typeof window?this:window)},{}],3:[function(require,module,exports){function checkName(name){var n=name.toLowerCase().trim();return!!itemSpecs[n]&&n}var itemSpecs=require("./itemSpecs"),costCalculator=require("./costCalculator"),contents={},api=module.exports={empty:function(){return contents={},api},addItem:function(name){var n=checkName(name);return n?(contents[n]?contents[n]+=1:contents[n]=1,api):(console.log("Invalid item, cannot be added to basket:"+name),api)},removeItem:function(name){var n=checkName(name);return n?(contents[n]&&contents[n]>0&&(contents[n]-=1),contents[n]<1&&(contents[n]=void 0),api):(console.log("Invalid item, cannot be removed from basket:"+name),api)},getContents:function(){return JSON.parse(JSON.stringify(contents))},getCostedContents:function(){return costCalculator(itemSpecs,this.getContents())}}},{"./costCalculator":4,"./itemSpecs":5}],4:[function(require,module,exports){module.exports=function(itemSpecs,contents){var cc={items:[],totalWithoutDiscount:0,totalDiscount:0,total:0};return Object.keys(contents).forEach(function(item){var cost=contents[item]*itemSpecs[item].price;cc.totalWithoutDiscount+=cost;var itemDetails={name:item,quantity:contents[item],unitPrice:itemSpecs[item].price,cost:cost};itemSpecs[item].discountFunction&&"function"==typeof itemSpecs[item].discountFunction&&(itemDetails.discount=itemSpecs[item].discountFunction(contents[item]),itemDetails.discount&&itemDetails.discount.amount&&(cc.totalDiscount+=itemDetails.discount.amount)),cc.items.push(itemDetails)}),cc.total=cc.totalWithoutDiscount-cc.totalDiscount,cc}},{}],5:[function(require,module,exports){module.exports={apple:{price:25},orange:{price:30},garlic:{price:15},papaya:{price:50,discountFunction:function(quantity){var quantity=Math.floor(quantity/3),amount=quantity*this.price;return quantity>0?{quantity:quantity,amount:amount,name:"Papaya 3 for 2"}:void 0}}}},{}],6:[function(require,module,exports){function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}const sprintf=require("sprintf-js").sprintf;module.exports={getReceipt:function(data){var s="";return s+="Basket receipt\n",s+="==============\n",s+="\n",s+=sprintf("%-16s %s   %s\n","Product","Quantity","Total"),s+=sprintf("%-16s %s   %s\n","-------","--------","-----"),data.items.forEach(function(item){s+=sprintf("%-21s %3d %7.2f \n",capitalizeFirstLetter(item.name),item.quantity,item.cost/100),item.discount&&item.discount.amount>0&&(s+=sprintf("%-21s %3d %7.2f\n","* "+(item.discount.name||"Discount"),item.discount.quantity||1,item.discount.amount/-100))}),data.totalDiscount&&data.totalDiscount>0&&(s+=sprintf("\n%-25s %7.2f\n","Total without discounts",data.totalWithoutDiscount/100),s+=sprintf("%-25s %7.2f\n","Total discounts",data.totalDiscount/-100)),s+=sprintf("\n%-25s %7.2f","TOTAL",data.total/100)}}},{"sprintf-js":2}],7:[function(require,module,exports){(function(process){const basket=require("./basket"),receiptGenerator=require("./receiptGeneratorText");list=process.argv.slice(2).join(" ").trim().split(/[\n\s,;]+/),list.forEach(function(item){item.match(/\w/)&&basket.addItem(item)});try{void 0!=window&&(window.basket=basket,window.receiptGenerator=receiptGenerator)}catch(e){}var cc=basket.getCostedContents();console.log(receiptGenerator.getReceipt(cc))}).call(this,require("_process"))},{"./basket":3,"./receiptGeneratorText":6,_process:1}],"browserify-fs":[function(require,module,exports){},{}]},{},[7]);
